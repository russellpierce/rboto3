library(parallel)

cl <- makePSOCKcluster(1)
clusterEvalQ(cl, library(rboto3))

`%<reticulate>%` <- function(x, y) {
  clusterCall(cl, function() {y})[[1]]
}

rboto3 <- function(y) {
  clusterCall(cl, function() {y})[[1]]
}

rboto3(library(rboto3))
rboto3(library(reticulate))
rboto3(s3 <-  boto3$resource('s3'))
rboto3(s3$buckets$page_size(Inf))
rboto3(lapply(iter_next(s3$buckets$pages()), function(bucket) {bucket$name}))


